{"version":3,"sources":["images/default_profile_picture.jpg","serviceWorker.js","global_components/firebase.js","global_components/AuthProvider.js","global_components/PrivateRoute.js","screens/Login/index.tsx","screens/Chat/components/ContactList/index.js","screens/Chat/components/Modal/index.tsx","screens/Chat/components/Spinner/index.tsx","screens/Chat/components/Settings/index.js","screens/Chat/components/FriendInfo/index.js","screens/Chat/components/RightPanel/index.js","redux/chat/actions.ts","redux/chat/types.ts","screens/Chat/components/Messages/index.tsx","screens/Chat/components/MessageForm/index.tsx","screens/Chat/index.tsx","screens/Register/index.tsx","global_components/PublicRoute.js","redux/chat/reducer.ts","redux/store.ts","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","this","auth","db","firestore","storageRef","storage","ref","email","password","signInWithEmailAndPassword","name","Promise","resolve","reject","a","createUserWithEmailAndPassword","cred","user","updateProfile","displayName","collection","doc","uid","set","exists","console","log","signOut","message","friendID","currentUserRef","currentUser","friendRef","runTransaction","transaction","get","data","friends","chatID","newChat","id","merge","add","from","text","createdAt","FieldValue","serverTimestamp","unsubscribe","dispatchMessages","where","Timestamp","fromDate","Date","onSnapshot","querySnapshot","empty","messages","docChanges","forEach","type","push","lastMessageSnapshot","orderBy","startAfter","limit","previous10MessageSnapshots","docs","length","map","reverse","last20MessagesSnapshots","docsLength","undefined","profilePicture","uploadTask","child","put","on","snapshot","progress","bytesTransferred","totalBytes","state","TaskState","PAUSED","RUNNING","err","getDownloadURL","then","downloadURL","avatarURL","usersInfo","userID","listAll","usersAvatarList","URLsPromises","items","imageRef","all","avatarURLs","avatarData","avatarID","slice","getUsersNameAndID","usersNameAndID","getUsersAvatars","usersAvatars","usersAvatarsID","usersProfilesData","indexOfAvatarID","indexOf","AuthContext","React","createContext","AuthProvider","children","useState","setCurrentUser","pending","setPending","useEffect","onAuthStateChanged","Provider","value","PrivateRoute","rest","useContext","to","Login","history","useHistory","setEmail","setPassword","loginError","setLoginError","onSubmit","e","preventDefault","login","replace","catch","className","onChange","target","placeholder","ContactList","friendsProfilesData","indexOfChosenFriend","setIndexOfChosenFriend","index","isChosenFriend","onClick","key","src","require","alt","width","height","Modal","open","ReactDom","createPortal","document","getElementById","Spinner","styles","borderColor","margin","style","Array","_","Settings","isSettingsContainerOpened","setIsSettingsContainerOpened","minWidth","maxWidth","x","y","aspect","unit","crop","setCrop","setCompletedCrop","isModalOpen","setIsModalOpen","imageDataUrl","setImageDataUrl","avatarUrl","setAvatarUrl","isSavingAvatar","setIsSavingAvatar","useRef","getMyAvatarURL","downloadedAvatarUrl","fetchAvatarUrl","getCroppedImg","image","fileName","canvas","createElement","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","toBlob","blob","URL","revokeObjectURL","newAvatarUrl","createObjectURL","saveCroppedImage","current","changeProfilePicture","prevState","htmlFor","accept","files","reader","FileReader","addEventListener","result","readAsDataURL","onClose","stopPropagation","percentCrop","onComplete","onImageLoaded","imageStyle","IMAGE_PREVIEW_STYLES","circularCrop","ruleOfThirds","maxHeight","objectFit","FriendInfo","profilesDataOfChosenFriend","RightPanel","logout","res","addLast20Messages","payload","addError","error","addNewMessages","add10PreviousMessages","startFetching20LastMessages","stopFetching20LastMessages","startFetching10PreviousMessages","stopFetching10PreviousMessages","Messages","props","currentUserID","intersectionObserverRef","firstMessageRef","messagesContainerRef","setFirstMessageRef","observeFirstMessage","disconnect","IntersectionObserver","entries","isIntersecting","fetch10PreviousMessages","observe","getMyUID","createRef","node","fetchLast20Messages","prevProps","scrollHeight","scrollTop","isFetching10PreviousMessages","isFetching20LastMessages","isFirstMessage","Component","mapDispatchToProps","dispatch","get10PreviousMessages","previous10Messages","getState","getLast20Messages","last20Messages","chat","cancelPreviousListener","listenForNewMessages","connect","MessageForm","useDispatch","setMessage","sendMessage","Chat","setFriendsProfilesData","currentUserUID","getUsersProfilesData","filter","fetchUsersProfilesData","useLocation","pathname","path","render","params","Register","setName","passwordConfirmation","setPasswordConfirmation","registerError","setRegisterError","register","PublicRoute","initialState","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","useSelector","ReactDOM","StrictMode","exact","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9e827bf3.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,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\"","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDus1I-dkUE4CtOZNlpt8ZKXL5pl1FZ0Mw\",\r\n  authDomain: \"saper-ce3aa.firebaseapp.com\",\r\n  databaseURL: \"https://saper-ce3aa.firebaseio.com\",\r\n  projectId: \"saper-ce3aa\",\r\n  storageBucket: \"saper-ce3aa.appspot.com\",\r\n  messagingSenderId: \"320043537840\",\r\n  appId: \"1:320043537840:web:3d6e8c76ea84c5aa7bb275\",\r\n  measurementId: \"G-GZT12414FL\",\r\n};\r\n\r\nclass Firebase {\r\n  constructor() {\r\n    firebase.initializeApp(firebaseConfig);\r\n    this.auth = firebase.auth();\r\n    this.db = firebase.firestore();\r\n    this.storageRef = firebase.storage().ref();\r\n  }\r\n\r\n  login(email, password) {\r\n    return this.auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  async register(name, email, password) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const cred = await this.auth.createUserWithEmailAndPassword(\r\n          email,\r\n          password\r\n        );\r\n        const { user } = cred;\r\n\r\n        await user.updateProfile({\r\n          displayName: name,\r\n        });\r\n\r\n        await this.db.collection(\"users\").doc(user.uid).set({\r\n          exists: true,\r\n          displayName: user.displayName,\r\n        });\r\n\r\n        resolve(\"Success\");\r\n      } catch (err) {\r\n        console.log(\"REGISTER ERROR: \", err);\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    return this.auth.signOut();\r\n  }\r\n\r\n  async sendMessage(message, friendID) {\r\n    const currentUserRef = this.db\r\n      .collection(\"users\")\r\n      .doc(this.auth.currentUser.uid);\r\n\r\n    const friendRef = this.db.collection(\"users\").doc(friendID);\r\n\r\n    try {\r\n      await this.db.runTransaction(async (transaction) => {\r\n        const { friends } = await (\r\n          await transaction.get(currentUserRef)\r\n        ).data();\r\n\r\n        let chatID = friends && friends[friendID];\r\n        if (!chatID) {\r\n          const newChat = this.db.collection(\"chats\").doc();\r\n          chatID = newChat.id;\r\n\r\n          currentUserRef.set(\r\n            {\r\n              friends: {\r\n                [friendID]: chatID,\r\n              },\r\n            },\r\n            { merge: true }\r\n          );\r\n\r\n          friendRef.set(\r\n            {\r\n              friends: {\r\n                [this.auth.currentUser.uid]: chatID,\r\n              },\r\n            },\r\n            { merge: true }\r\n          );\r\n        }\r\n\r\n        console.log(\"TRANSACTION \");\r\n        this.db.collection(\"chats\").doc(chatID).collection(\"messages\").add({\r\n          from: this.auth.currentUser.uid,\r\n          text: message,\r\n          createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        });\r\n      });\r\n    } catch (err) {\r\n      console.log(\"Transaction failure:\", err.message);\r\n    }\r\n  }\r\n\r\n  cancelPreviousListener() {\r\n    if (this.unsubscribe) this.unsubscribe();\r\n  }\r\n\r\n  async listenForNewMessages(dispatchMessages, friendID) {\r\n    const { friends } = await (\r\n      await this.db.collection(\"users\").doc(this.auth.currentUser.uid).get()\r\n    ).data();\r\n\r\n    if (!(friends && friends[friendID])) return [];\r\n\r\n    this.unsubscribe = this.db\r\n      .collection(\"chats\")\r\n      .doc(friends[friendID])\r\n      .collection(\"messages\")\r\n      .where(\r\n        \"createdAt\",\r\n        \">=\",\r\n        firebase.firestore.Timestamp.fromDate(new Date())\r\n      )\r\n      .onSnapshot((querySnapshot) => {\r\n        if (querySnapshot.empty) {\r\n          return [];\r\n        }\r\n\r\n        const messages = [];\r\n        querySnapshot.docChanges().forEach(function (message) {\r\n          if (message.type === \"added\") {\r\n            const { from, text, createdAt } = message.doc.data();\r\n            messages.push({ from, text, createdAt, id: message.doc.id });\r\n          }\r\n        });\r\n\r\n        dispatchMessages(messages);\r\n      });\r\n  }\r\n\r\n  async get10PreviousMessages() {\r\n    if (!this.lastMessageSnapshot) return [];\r\n\r\n    const previous10MessageSnapshots = await this.db\r\n      .collection(\"chats\")\r\n      .doc(this.chatID)\r\n      .collection(\"messages\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .startAfter(this.lastMessageSnapshot)\r\n      .limit(10)\r\n      .get();\r\n\r\n    this.lastMessageSnapshot =\r\n      previous10MessageSnapshots.docs[\r\n        previous10MessageSnapshots.docs.length - 1\r\n      ];\r\n\r\n    return previous10MessageSnapshots.docs\r\n      .map((doc) => ({\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      }))\r\n      .reverse();\r\n  }\r\n\r\n  async getLast20Messages(friendID) {\r\n    try {\r\n      const { friends } = await (\r\n        await this.db.collection(\"users\").doc(this.auth.currentUser.uid).get()\r\n      ).data();\r\n\r\n      if (!(friends && friends[friendID])) return [];\r\n\r\n      this.chatID = friends[friendID];\r\n\r\n      const last20MessagesSnapshots = await this.db\r\n        .collection(\"chats\")\r\n        .doc(this.chatID)\r\n        .collection(\"messages\")\r\n        .orderBy(\"createdAt\", \"desc\")\r\n        .limit(20)\r\n        .get();\r\n\r\n      const docsLength = last20MessagesSnapshots.docs.length;\r\n\r\n      if (docsLength < 20) {\r\n        this.lastMessageSnapshot = undefined;\r\n      } else {\r\n        this.lastMessageSnapshot = last20MessagesSnapshots.docs[docsLength - 1];\r\n      }\r\n\r\n      return last20MessagesSnapshots.docs\r\n        .map((doc) => ({\r\n          ...doc.data(),\r\n          id: doc.id,\r\n        }))\r\n        .reverse();\r\n    } catch (err) {\r\n      console.log(\"getLast20Messages error try/catch: \", err);\r\n      return err.message;\r\n    }\r\n  }\r\n\r\n  getMyUID() {\r\n    return this.auth.currentUser.uid;\r\n  }\r\n\r\n  async changeProfilePicture(profilePicture) {\r\n    return new Promise((resolve, reject) => {\r\n      const profilePictureRef = this.storageRef.child(\r\n        `profilePictures/${this.auth.currentUser.uid}`\r\n      );\r\n\r\n      const uploadTask = profilePictureRef.put(profilePicture);\r\n\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        function (snapshot) {\r\n          var progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n          console.log(\"Upload is \" + progress + \"% done\");\r\n          switch (snapshot.state) {\r\n            case firebase.storage.TaskState.PAUSED:\r\n              console.log(\"Upload is paused\");\r\n              break;\r\n            case firebase.storage.TaskState.RUNNING:\r\n              console.log(\"Upload is running\");\r\n              break;\r\n          }\r\n        },\r\n        function (err) {\r\n          console.log(\"ERROR in uploadTask: \", err);\r\n          reject(err.message);\r\n        },\r\n        function () {\r\n          uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\r\n            console.log(\"File available at\", downloadURL);\r\n            resolve(downloadURL);\r\n          });\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  async getMyAvatarURL() {\r\n    if (this.avatarURL) return this.avatarURL;\r\n    if (!(this.auth.currentUser && this.auth.currentUser.uid)) return null;\r\n\r\n    console.log(\"this.auth.currentUser.uid: \", this.auth.currentUser.uid);\r\n\r\n    try {\r\n      const avatarURL = await this.storageRef\r\n        .child(`profilePictures/${this.auth.currentUser.uid}`)\r\n        .getDownloadURL();\r\n\r\n      console.log(\"avatarURL: \", avatarURL);\r\n\r\n      this.avatarURL = avatarURL;\r\n\r\n      return avatarURL;\r\n    } catch (err) {\r\n      console.log(\"ERR: \", err);\r\n    }\r\n  }\r\n\r\n  async getUsersNameAndID() {\r\n    const querySnapshot = await this.db.collection(\"users\").get();\r\n\r\n    const usersInfo = querySnapshot.docs.map((doc) => {\r\n      // doc.data() is never undefined for query doc snapshots\r\n      const displayName = doc.data().displayName;\r\n      const { id } = doc;\r\n\r\n      return { displayName, userID: id };\r\n    });\r\n\r\n    return usersInfo;\r\n  }\r\n\r\n  async getUsersAvatars() {\r\n    const usersAvatarList = await this.storageRef\r\n      .child(\"profilePictures\")\r\n      .listAll();\r\n\r\n    const URLsPromises = usersAvatarList.items.map((imageRef) =>\r\n      imageRef.getDownloadURL()\r\n    );\r\n\r\n    const avatarURLs = await Promise.all(URLsPromises);\r\n\r\n    const avatarData = avatarURLs.map((avatarURL) => ({\r\n      avatarURL,\r\n      avatarID: avatarURL.slice(88, 116),\r\n    }));\r\n\r\n    return avatarData;\r\n  }\r\n\r\n  async getUsersProfilesData() {\r\n    const usersNameAndID = await this.getUsersNameAndID();\r\n    const usersAvatars = await this.getUsersAvatars();\r\n    const usersAvatarsID = usersAvatars.map(({ avatarID }) => avatarID);\r\n\r\n    const usersProfilesData = usersNameAndID.map(({ displayName, userID }) => {\r\n      const indexOfAvatarID = usersAvatarsID.indexOf(userID);\r\n      if (indexOfAvatarID === -1)\r\n        return { displayName, userID, avatarURL: null };\r\n      return {\r\n        displayName,\r\n        userID,\r\n        avatarURL: usersAvatars[indexOfAvatarID].avatarURL,\r\n      };\r\n    });\r\n\r\n    return usersProfilesData;\r\n  }\r\n}\r\n\r\nexport default new Firebase();\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport firebase from \"./firebase\";\r\n\r\nexport const AuthContext = React.createContext({ currentUser: null });\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [pending, setPending] = useState(true);\r\n\r\n  useEffect(() => {\r\n    firebase.auth.onAuthStateChanged((user) => {\r\n      setCurrentUser(user);\r\n      setPending(false);\r\n    });\r\n  }, []);\r\n\r\n  if (pending) {\r\n    return <>Loading...</>;\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        currentUser,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"./AuthProvider\";\r\n\r\nconst PrivateRoute = ({ children, ...rest }) => {\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  return currentUser ? (\r\n    <Route {...rest}>{children}</Route>\r\n  ) : (\r\n    <Redirect to=\"/login\" />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useState, useEffect, useContext, FormEvent } from \"react\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../global_components/AuthProvider\";\r\nimport \"./index.scss\";\r\nimport firebase from \"../../global_components/firebase\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loginError, setLoginError] = useState(\"\");\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    firebase\r\n      .login(email, password)\r\n      .then(({ user }) => {\r\n        if (user) {\r\n        }\r\n        history.replace(\"/chat\");\r\n      })\r\n      .catch(({ message }) => {\r\n        console.log(\"ERR: \", message);\r\n        setLoginError(message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div id=\"login-container\">\r\n      <form onSubmit={handleSubmit} id=\"login-form\">\r\n        <fieldset>\r\n          <legend>\r\n            Welcome to <span id=\"login-text-highlight\">Messenger</span>\r\n          </legend>\r\n          {/* \r\n          <div className=\"container-row\">\r\n            <button className=\"button-auth-provider\">Google</button>\r\n            <button className=\"button-auth-provider\">Facebook</button>\r\n          </div> */}\r\n\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"login-input-email\"\r\n            className=\"login-input\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"Email\"\r\n          />\r\n\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"login-input-password\"\r\n            className=\"login-input\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"Password\"\r\n          />\r\n\r\n          <div id=\"login-error-container\">\r\n            {loginError && <span id=\"login-error\">{loginError}</span>}\r\n          </div>\r\n\r\n          <button id=\"login-submit-button\">Sign in</button>\r\n          <div id=\"register-bottom-container\">\r\n            <span> Don't have an account yet?</span>\r\n\r\n            <Link id=\"register-bottom-container__link\" to=\"/register\">\r\n              Sign up here!\r\n            </Link>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport \"./index.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ContactList = ({\r\n  friendsProfilesData,\r\n  indexOfChosenFriend,\r\n  setIndexOfChosenFriend,\r\n}) => {\r\n  return (\r\n    <div id=\"contact-list-container\">\r\n      {friendsProfilesData.map(({ displayName, userID, avatarURL }, index) => {\r\n        const isChosenFriend = indexOfChosenFriend === index;\r\n\r\n        return (\r\n          <li\r\n            onClick={() => setIndexOfChosenFriend(index)}\r\n            className={`list-item ${isChosenFriend && \"list-item--current\"}`}\r\n            key={userID}\r\n          >\r\n            <Link to={`/chat/${userID}`} className=\"list-item__link\">\r\n              <img\r\n                src={\r\n                  avatarURL\r\n                    ? avatarURL\r\n                    : require(\"../../../../images/default_profile_picture.jpg\")\r\n                }\r\n                alt=\"Profile picture\"\r\n                className=\"list-item__avatar\"\r\n                width=\"50\"\r\n                height=\"50\"\r\n              />\r\n              {displayName}\r\n            </Link>\r\n          </li>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactList;\r\n","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport \"./index.scss\";\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  children: React.ReactNode;\r\n  onClose:\r\n    | ((event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void)\r\n    | undefined;\r\n  getCroppedImg:\r\n    | ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void)\r\n    | undefined;\r\n}\r\n\r\nconst Modal = ({ open, children }: Props) => {\r\n  if (!open) return null;\r\n\r\n  return ReactDom.createPortal(\r\n    <>\r\n      <div id=\"overlay\">{children}</div>\r\n    </>,\r\n    document.getElementById(\"portal\") as Element\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport \"./index.scss\";\r\n\r\ninterface Props {\r\n  styles?: {\r\n    borderColor?: string;\r\n    margin?: string;\r\n  };\r\n}\r\n\r\nconst Spinner: React.FC<Props> = ({\r\n  styles: { borderColor, margin } = {\r\n    borderColor: \"dodgerblue\",\r\n    margin: \"auto\",\r\n  },\r\n}) => (\r\n  <div className=\"lds-ring\" style={{ margin }}>\r\n    {/* <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div> */}\r\n\r\n    {Array.from({ length: 4 }).map((_, index) => (\r\n      <div\r\n        key={index}\r\n        style={{\r\n          borderColor: `${borderColor} transparent transparent transparent`,\r\n        }}\r\n      ></div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Spinner;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./index.scss\";\r\nimport firebase from \"../../../../global_components/firebase\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport Modal from \"../Modal\";\r\nimport Spinner from \"../Spinner\";\r\nimport { TiArrowSortedDown } from \"react-icons/ti\";\r\n\r\nconst Settings = () => {\r\n  const [isSettingsContainerOpened, setIsSettingsContainerOpened] = useState(\r\n    false\r\n  );\r\n  const [crop, setCrop] = useState({\r\n    minWidth: 80,\r\n    width: 80,\r\n    maxWidth: 100,\r\n    x: 10,\r\n    y: 10,\r\n    aspect: 1,\r\n    unit: \"%\",\r\n  });\r\n  const [completedCrop, setCompletedCrop] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [imageDataUrl, setImageDataUrl] = useState(\"\");\r\n  const [avatarUrl, setAvatarUrl] = useState(\"\");\r\n  const [isSavingAvatar, setIsSavingAvatar] = useState(false);\r\n  const imageRef = useRef();\r\n\r\n  const changeVisibilityOfSettingsContainer = () => {\r\n    setIsSettingsContainerOpened((prevState) => !prevState);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAvatarUrl = async () => {\r\n      console.log(\"fetchAvatarUrl\");\r\n      const downloadedAvatarUrl = await firebase.getMyAvatarURL();\r\n      setAvatarUrl(downloadedAvatarUrl);\r\n    };\r\n\r\n    fetchAvatarUrl();\r\n  }, []);\r\n\r\n  const onImageLoaded = (image) => {\r\n    imageRef.current = image;\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      const reader = new FileReader();\r\n      reader.addEventListener(\"load\", () => {\r\n        setImageDataUrl(reader.result);\r\n\r\n        setIsModalOpen(true);\r\n      });\r\n      reader.readAsDataURL(e.target.files[0]);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  const getCroppedImg = (image, crop, fileName) => {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    if (ctx === null) return;\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n\r\n    return new Promise((resolve, reject) => {\r\n      canvas.toBlob((blob) => {\r\n        if (!blob) {\r\n          return;\r\n        }\r\n\r\n        blob.name = fileName;\r\n        if (avatarUrl) {\r\n          window.URL.revokeObjectURL(avatarUrl);\r\n        }\r\n        const newAvatarUrl = window.URL.createObjectURL(blob);\r\n        const response = { newAvatarUrl, blob };\r\n        resolve(response);\r\n      }, \"image/jpeg\");\r\n    });\r\n  };\r\n\r\n  const saveCroppedImage = async () => {\r\n    if (imageRef.current && crop.width) {\r\n      try {\r\n        setIsSavingAvatar(true);\r\n\r\n        const { newAvatarUrl, blob } = await getCroppedImg(\r\n          imageRef.current,\r\n          crop,\r\n          \"avatar.jpeg\"\r\n        );\r\n\r\n        setAvatarUrl(newAvatarUrl);\r\n        const donwloadURL = await firebase.changeProfilePicture(blob);\r\n      } catch (err) {\r\n        console.log(\"Error: \", err.message);\r\n      } finally {\r\n        setIsSavingAvatar(false);\r\n        setIsModalOpen(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"container-settings\">\r\n      <button\r\n        id=\"container-settings__title\"\r\n        onClick={changeVisibilityOfSettingsContainer}\r\n      >\r\n        <span id=\"settings-title\">Settings</span>\r\n        <TiArrowSortedDown\r\n          className={`settings-icon ${\r\n            isSettingsContainerOpened ? \"settings-icon--rotated\" : \"\"\r\n          }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`container-settings__collapsible ${\r\n          isSettingsContainerOpened\r\n            ? \"container-settings__collapsible--opened\"\r\n            : \"container-settings__collapsible--closed\"\r\n        }`}\r\n      >\r\n        <div id=\"avatar-container\">\r\n          <img\r\n            src={\r\n              avatarUrl\r\n                ? avatarUrl\r\n                : require(\"../../../../images/default_profile_picture.jpg\")\r\n            }\r\n            alt=\"Avatar\"\r\n            id=\"avatar-image\"\r\n          />\r\n\r\n          <label htmlFor=\"input-avatar\" id=\"input-avatar__label\">\r\n            Change avatar\r\n          </label>\r\n          <input\r\n            id=\"input-avatar\"\r\n            type=\"file\"\r\n            accept=\"image/png, image/jpeg\"\r\n            onChange={handleImageChange}\r\n          />\r\n\r\n          <Modal\r\n            open={isModalOpen}\r\n            onClose={() => setIsModalOpen(false)}\r\n            getCroppedImg={getCroppedImg}\r\n          >\r\n            <div id=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n              <div id=\"modal-image-container\">\r\n                <ReactCrop\r\n                  src={imageDataUrl}\r\n                  crop={crop}\r\n                  onChange={(crop, percentCrop) => {\r\n                    setCrop(crop);\r\n                  }}\r\n                  onComplete={(crop) => {\r\n                    setCompletedCrop(crop);\r\n                  }}\r\n                  onImageLoaded={onImageLoaded}\r\n                  imageStyle={IMAGE_PREVIEW_STYLES}\r\n                  circularCrop\r\n                  ruleOfThirds\r\n                />\r\n              </div>\r\n\r\n              <div id=\"modal-buttons-container\">\r\n                <button\r\n                  className=\"modal-button modal-button--cancel\"\r\n                  onClick={() => setIsModalOpen(false)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n\r\n                <button\r\n                  className=\"modal-button modal-button--save\"\r\n                  onClick={saveCroppedImage}\r\n                >\r\n                  {isSavingAvatar && (\r\n                    <Spinner styles={{ borderColor: \"white\", margin: \"0px\" }} />\r\n                  )}\r\n                  Save\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n\r\nconst IMAGE_PREVIEW_STYLES = {\r\n  width: \"auto\",\r\n  maxHeight: \"450px\",\r\n  objectFit: \"contain\",\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./index.scss\";\r\n\r\nconst FriendInfo = ({ profilesDataOfChosenFriend }) => {\r\n  if (!profilesDataOfChosenFriend) return null;\r\n\r\n  const { avatarURL, displayName } = profilesDataOfChosenFriend;\r\n\r\n  return (\r\n    <div id=\"flex-info-container\">\r\n      <div id=\"friend-avatar-container\">\r\n        <img\r\n          src={\r\n            avatarURL\r\n              ? avatarURL\r\n              : require(\"../../../../images/default_profile_picture.jpg\")\r\n          }\r\n          alt=\"\"\r\n          id=\"friend-avatar\"\r\n        />\r\n        <span id=\"friend-name\">{displayName}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FriendInfo;\r\n","import React from \"react\";\r\nimport \"./index.scss\";\r\nimport Settings from \"../Settings\";\r\nimport FriendInfo from \"../FriendInfo\";\r\nimport firebase from \"../../../../global_components/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst RightPanel = ({ profilesDataOfChosenFriend }) => {\r\n  const history = useHistory();\r\n\r\n  const logout = () => {\r\n    firebase\r\n      .logout()\r\n      .then((res) => {\r\n        history.replace(\"/login\");\r\n      })\r\n      .catch((err) => console.log(\"ERROR IN SIGNOUT: \", err));\r\n  };\r\n\r\n  return (\r\n    <div id=\"right-panel-container\">\r\n      <Settings />\r\n      <FriendInfo profilesDataOfChosenFriend={profilesDataOfChosenFriend} />\r\n      <button id=\"button-logout\" onClick={logout}>\r\n        Log out\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RightPanel;\r\n","import {\r\n  ADD_LAST_20_MESSAGES,\r\n  ADD_ERROR,\r\n  ADD_NEW_MESSAGES,\r\n  SET_FRIEND_ID,\r\n  ADD_10_PREVIOUS_MESSAGES,\r\n  START_FETCHING_20_LAST_MESSAGES,\r\n  STOP_FETCHING_20_LAST_MESSAGES,\r\n  STOP_FETCHING_10_PREVIOUS_MESSAGES,\r\n  START_FETCHING_10_PREVIOUS_MESSAGES,\r\n} from \"./types\";\r\nimport { Message } from \"./interfaces\";\r\nimport firebase from \"../../global_components/firebase\";\r\nimport { AppThunk } from \"../store\";\r\n\r\nexport const fetchLast20Messages = (friendID: string): AppThunk => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  dispatch(startFetching20LastMessages());\r\n  try {\r\n    const last20Messages = await firebase.getLast20Messages(friendID);\r\n    if (last20Messages === undefined) {\r\n      addLast20Messages([]);\r\n    } else {\r\n      dispatch(stopFetching20LastMessages());\r\n      dispatch(addLast20Messages(last20Messages));\r\n    }\r\n  } catch (err) {\r\n    console.log(\"error in fetchLast20Messages: \", err.message);\r\n    dispatch(addError(err.message));\r\n  } finally {\r\n    if (getState().chat.messages.length > 0) {\r\n      firebase.cancelPreviousListener();\r\n      firebase.listenForNewMessages(\r\n        (messages: Message[]) => dispatch(addNewMessages(messages)),\r\n        friendID\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nconst addLast20Messages = (messages: Message[]) => ({\r\n  type: ADD_LAST_20_MESSAGES,\r\n  payload: {\r\n    messages,\r\n  },\r\n});\r\n\r\nexport const setFriendID = (friendID: string) => ({\r\n  type: SET_FRIEND_ID,\r\n  payload: {\r\n    friendID,\r\n  },\r\n});\r\n\r\nconst addError = (error: string[]) => ({\r\n  type: ADD_ERROR,\r\n  payload: {\r\n    error,\r\n  },\r\n});\r\n\r\nconst addNewMessages = (messages: Message[]) => ({\r\n  type: ADD_NEW_MESSAGES,\r\n  payload: {\r\n    messages,\r\n  },\r\n});\r\n\r\nexport const sendMessage = (\r\n  message: string,\r\n  friendID: string\r\n): AppThunk => async (dispatch, getState) => {\r\n  //dispatch(addNewMessages([{from: firebase.getMyUID(),  }]))\r\n\r\n  const state = getState();\r\n\r\n  try {\r\n    firebase.sendMessage(message, friendID).then(() => {\r\n      console.log(\"sendMessage\");\r\n    });\r\n  } catch (err) {\r\n    dispatch(addError(err.message));\r\n  } finally {\r\n    if (state.chat.messages.length === 0) {\r\n      firebase.cancelPreviousListener();\r\n      firebase.listenForNewMessages(\r\n        (messages: Message[]) => dispatch(addNewMessages(messages)),\r\n        friendID\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nexport const fetch10PreviousMessages = (): AppThunk => async (dispatch) => {\r\n  dispatch(startFetching10PreviousMessages());\r\n  try {\r\n    const previous10Messages = await firebase.get10PreviousMessages();\r\n    if (previous10Messages === undefined) {\r\n      add10PreviousMessages([]);\r\n    } else {\r\n      dispatch(stopFetching10PreviousMessages());\r\n      dispatch(add10PreviousMessages(previous10Messages));\r\n    }\r\n  } catch (err) {\r\n    console.log(\"error in fetchLast10Messages: \", err.message);\r\n    dispatch(addError(err.message));\r\n  }\r\n};\r\n\r\nconst add10PreviousMessages = (messages: Message[]) => ({\r\n  type: ADD_10_PREVIOUS_MESSAGES,\r\n  payload: {\r\n    messages,\r\n  },\r\n});\r\n\r\nconst startFetching20LastMessages = () => ({\r\n  type: START_FETCHING_20_LAST_MESSAGES,\r\n});\r\n\r\nconst stopFetching20LastMessages = () => ({\r\n  type: STOP_FETCHING_20_LAST_MESSAGES,\r\n});\r\n\r\nconst startFetching10PreviousMessages = () => ({\r\n  type: START_FETCHING_10_PREVIOUS_MESSAGES,\r\n});\r\n\r\nconst stopFetching10PreviousMessages = () => ({\r\n  type: STOP_FETCHING_10_PREVIOUS_MESSAGES,\r\n});\r\n","export const FETCH_LAST_20_MESSAGES = \"FETCH_LAST_20_MESSAGES\";\r\nexport const ADD_LAST_20_MESSAGES = \"ADD_LAST_20_MESSAGES\";\r\nexport const ADD_10_PREVIOUS_MESSAGES = \"ADD_10_PREVIOUS_MESSAGES\";\r\nexport const SEND_MESSAGE = \"SEND_MESSAGE\";\r\nexport const ADD_NEW_MESSAGES = \"ADD_NEW_MESSAGES\";\r\n\r\nexport const SET_FRIEND_ID = 'SET_FRIEND_ID';\r\nexport const ADD_ERROR = \"ADD_ERROR\";\r\n\r\n\r\nexport const START_FETCHING_20_LAST_MESSAGES = \"START_FETCHING_20_LAST_MESSAGES\";\r\nexport const STOP_FETCHING_20_LAST_MESSAGES = 'STOP_FETCHING_20_LAST_MESSAGES';\r\nexport const START_FETCHING_10_PREVIOUS_MESSAGES = 'START_FETCHING_10_PREVIOUS_MESSAGES';\r\nexport const STOP_FETCHING_10_PREVIOUS_MESSAGES = \"STOP_FETCHING_10_PREVIOUS_MESSAGES\";","import React, {\r\n  Component,\r\n  createRef,\r\n  RefObject,\r\n  MutableRefObject,\r\n} from \"react\";\r\nimport \"./index.scss\";\r\nimport { RootState } from \"../../../../redux/store\";\r\nimport firebase from \"../../../../global_components/firebase\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  fetchLast20Messages,\r\n  fetch10PreviousMessages,\r\n} from \"../../../../redux/chat/actions\";\r\nimport { Message } from \"../../../../redux/chat/interfaces\";\r\nimport { RouteProps } from \"react-router\";\r\nimport Spinner from \"../Spinner\";\r\n\r\ninterface Props {\r\n  fetchLast20Messages: Function;\r\n  fetch10PreviousMessages: Function;\r\n  messages: Message[];\r\n  isFetching20LastMessages: boolean;\r\n  isFetching10PreviousMessages: boolean;\r\n  friendID: string;\r\n}\r\n\r\nclass Messages extends Component<Props & RouteProps> {\r\n  private currentUserID: string;\r\n  private intersectionObserverRef: MutableRefObject<IntersectionObserver | null>;\r\n  private firstMessageRef: HTMLElement | null;\r\n  private messagesContainerRef: RefObject<HTMLDivElement>;\r\n  private setFirstMessageRef: (node: any) => void;\r\n  //private observeFirstMessage: () => void;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.currentUserID = firebase.getMyUID();\r\n\r\n    this.intersectionObserverRef = createRef();\r\n    this.firstMessageRef = null;\r\n    this.messagesContainerRef = createRef();\r\n    this.setFirstMessageRef = (node) => {\r\n      //callback ref\r\n      this.firstMessageRef = node;\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.observeFirstMessage();\r\n    this.props.fetchLast20Messages(this.props.friendID);\r\n  }\r\n\r\n  getSnapshotBeforeUpdate(prevProps: Props) {\r\n    if (\r\n      prevProps.messages.length < this.props.messages.length &&\r\n      this.messagesContainerRef.current\r\n    ) {\r\n      return (\r\n        this.messagesContainerRef.current.scrollHeight -\r\n        this.messagesContainerRef.current.scrollTop\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, _: any, snapshot: number) {\r\n    if (prevProps.friendID !== this.props.friendID)\r\n      this.props.fetchLast20Messages(this.props.friendID);\r\n\r\n    if (prevProps.messages !== this.props.messages) this.observeFirstMessage();\r\n\r\n    if (snapshot !== null && this.messagesContainerRef.current) {\r\n      this.messagesContainerRef.current.scrollTop =\r\n        this.messagesContainerRef.current.scrollHeight - snapshot;\r\n    }\r\n  }\r\n\r\n  observeFirstMessage = () => {\r\n    if (this.intersectionObserverRef.current) {\r\n      this.intersectionObserverRef.current.disconnect();\r\n    }\r\n\r\n    this.intersectionObserverRef.current = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting) {\r\n          this.props.fetch10PreviousMessages();\r\n        }\r\n      }\r\n    );\r\n\r\n    if (this.firstMessageRef && this.intersectionObserverRef.current)\r\n      this.intersectionObserverRef.current.observe(this.firstMessageRef);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"messages-container\" ref={this.messagesContainerRef}>\r\n        <div className=\"spinner-container\">\r\n          {this.props.isFetching10PreviousMessages ? (\r\n            <Spinner />\r\n          ) : (\r\n            <span className=\"no-more-messages\">\r\n              These are all messages in this conversation\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {this.props.isFetching20LastMessages ? (\r\n          <Spinner />\r\n        ) : (\r\n          this.props.messages.map(({ id, text, from }, index) => {\r\n            const isFirstMessage = index === 0;\r\n\r\n            return (\r\n              <div\r\n                key={id}\r\n                {...(isFirstMessage ? { ref: this.setFirstMessageRef } : {})}\r\n                className={`message-wrapper ${\r\n                  this.currentUserID === from\r\n                    ? \"message-wrapper--position-right\"\r\n                    : \"message-wrapper--position-left\"\r\n                }`}\r\n              >\r\n                <span className=\"message\">{text}</span>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  messages: state.chat.messages,\r\n  isFetching20LastMessages: state.chat.isFetching20LastMessages,\r\n  isFetching10PreviousMessages: state.chat.isFetching10PreviousMessages,\r\n});\r\n\r\nconst mapDispatchToProps = { fetch10PreviousMessages, fetchLast20Messages };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages);\r\n","import React, { useState, useEffect, FormEvent } from \"react\";\r\nimport \"./index.scss\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { sendMessage } from \"../../../../redux/chat/actions\";\r\nimport { RiSendPlane2Fill } from \"react-icons/ri\";\r\n\r\nconst MessageForm = ({ friendID }: { friendID: string }) => {\r\n  const dispatch = useDispatch();\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const submitMessage = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (message === \"\") return;\r\n    dispatch(sendMessage(message, friendID));\r\n    setMessage(\"\");\r\n  };\r\n\r\n  return (\r\n    <form id=\"form-chat\" onSubmit={submitMessage}>\r\n      <input\r\n        type=\"text\"\r\n        id=\"input-chat\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        placeholder=\"Type message...\"\r\n      />\r\n      <button id=\"submit-chat-button\">\r\n        <RiSendPlane2Fill id=\"submit-chat-button__icon\" />\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default MessageForm;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./index.scss\";\r\nimport ContactList from \"./components/ContactList\";\r\nimport RightPanel from \"./components/RightPanel\";\r\nimport firebase from \"../../global_components/firebase\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Messages from \"./components/Messages\";\r\nimport MessageForm from \"./components/MessageForm\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\ninterface Friend {\r\n  userID: string;\r\n  displayName: string;\r\n  avatarURL: URL;\r\n}\r\n\r\nconst Chat = () => {\r\n  const history = useHistory();\r\n  const [friendsProfilesData, setFriendsProfilesData] = useState<Friend[]>([]);\r\n  const [indexOfChosenFriend, setIndexOfChosenFriend] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchUsersProfilesData = async () => {\r\n      try {\r\n        const currentUserUID = firebase.getMyUID();\r\n        const usersProfilesData = await firebase.getUsersProfilesData();\r\n\r\n        const friendsProfilesData = usersProfilesData.filter(\r\n          ({ userID }) => userID !== currentUserUID\r\n        );\r\n\r\n        setFriendsProfilesData(friendsProfilesData);\r\n      } catch (err) {\r\n        console.log(\"ERROR IN fetchUsersProfilesData: \", err);\r\n      }\r\n    };\r\n\r\n    fetchUsersProfilesData();\r\n  }, []);\r\n\r\n  const pathName = useLocation().pathname;\r\n  if (pathName === \"/chat\" && friendsProfilesData.length)\r\n    history.replace(`/chat/${friendsProfilesData[0].userID}`);\r\n\r\n  return (\r\n    <div className=\"container-screen\">\r\n      <ContactList\r\n        friendsProfilesData={friendsProfilesData}\r\n        indexOfChosenFriend={indexOfChosenFriend}\r\n        setIndexOfChosenFriend={setIndexOfChosenFriend}\r\n      />\r\n      <div id=\"container-chat\">\r\n        <Switch>\r\n          <Route\r\n            path={`/chat/:friendID`}\r\n            render={(props) => (\r\n              <>\r\n                <Messages friendID={props.match.params.friendID} />\r\n                <MessageForm friendID={props.match.params.friendID} />\r\n              </>\r\n            )}\r\n          />\r\n        </Switch>\r\n      </div>\r\n      <RightPanel\r\n        profilesDataOfChosenFriend={friendsProfilesData[indexOfChosenFriend]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  ChangeEvent,\r\n  FormEvent,\r\n  useContext,\r\n} from \"react\";\r\nimport { Link, useHistory, Redirect } from \"react-router-dom\";\r\nimport \"./index.scss\";\r\nimport firebase from \"../../global_components/firebase\";\r\nimport { AuthContext } from \"../../global_components/AuthProvider\";\r\n\r\nconst Register = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\r\n  const [registerError, setRegisterError] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (password !== passwordConfirmation) {\r\n      setRegisterError(\"Passwords are different\");\r\n      return;\r\n    }\r\n\r\n    firebase\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        console.log(\"XXXXXXXXXXXXX\");\r\n        history.push(\"/login\");\r\n      })\r\n      .catch(({ message }) => {\r\n        console.log(\"REGISTER ERR: \", message);\r\n        setRegisterError(message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div id=\"register-container\">\r\n      <form id=\"register-form\" onSubmit={handleSubmit}>\r\n        <fieldset>\r\n          <legend>\r\n            Welcome to{\" \"}\r\n            <span className=\"register-text-highlight\">Messenger</span>\r\n          </legend>\r\n          <input\r\n            type=\"text\"\r\n            id=\"register-form-name\"\r\n            className=\"register-input\"\r\n            placeholder=\"Username\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            id=\"register-form-email\"\r\n            className=\"register-input\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            id=\"register-form-password\"\r\n            placeholder=\"Password\"\r\n            className=\"register-input\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            id=\"register-form-password-confirmation\"\r\n            placeholder=\"Password confirmation\"\r\n            className=\"register-input\"\r\n            value={passwordConfirmation}\r\n            onChange={(e) => setPasswordConfirmation(e.target.value)}\r\n          />\r\n\r\n          <div id=\"register-error-container\">\r\n            {registerError && <span id=\"register-error\">{registerError}</span>}\r\n          </div>\r\n\r\n          <button id=\"register-submit-button\">Sign up</button>\r\n\r\n          <div id=\"register-bottom-container\">\r\n            <span> Already have an account?</span>\r\n\r\n            <Link id=\"register-bottom-container__link\" to=\"/login\">\r\n              Sign in here!\r\n            </Link>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useContext } from \"react\";\r\nimport firebase from \"./firebase\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"./AuthProvider\";\r\n\r\nconst PublicRoute = ({ children, ...rest }) => {\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  return currentUser ? (\r\n    <Redirect to=\"/chat\" />\r\n  ) : (\r\n    <Route {...rest}>{children}</Route>\r\n  );\r\n};\r\n\r\nexport default PublicRoute;\r\n","import {  MessagesState, MessagesActionTypes} from \"./interfaces\"\r\nimport { ADD_LAST_20_MESSAGES, START_FETCHING_20_LAST_MESSAGES, STOP_FETCHING_20_LAST_MESSAGES, ADD_ERROR, ADD_NEW_MESSAGES, SET_FRIEND_ID, ADD_10_PREVIOUS_MESSAGES, START_FETCHING_10_PREVIOUS_MESSAGES, STOP_FETCHING_10_PREVIOUS_MESSAGES} from \"./types\";\r\n\r\n\r\n\r\nconst initialState: MessagesState = {\r\n    messages:[],\r\n    friendID: undefined,\r\n    isFetching20LastMessages: false,\r\n    isFetching10PreviousMessages: false,\r\n    error: undefined\r\n}\r\n\r\nexport default (state = initialState, action:MessagesActionTypes) => {\r\n\r\n    switch(action.type){\r\n        case ADD_LAST_20_MESSAGES:\r\n            const {messages} = action.payload;\r\n            return {\r\n                ...state,\r\n                messages: [...messages]\r\n            }\r\n            \r\n        case ADD_NEW_MESSAGES: \r\n        return {\r\n            ...state,\r\n            messages: [...state.messages, ...action.payload.messages]\r\n        }\r\n\r\n        case ADD_10_PREVIOUS_MESSAGES: {\r\n            const {messages} = action.payload;\r\n            if(messages.length === 0) return state;// Don't update state if there is no more messages\r\n            return {\r\n                ...state,\r\n                messages: [...messages, ...state.messages]\r\n            }\r\n        }\r\n   \r\n        case SET_FRIEND_ID: \r\n            return {\r\n                ...state, friendID: action.payload.friendID\r\n            }\r\n\r\n        case START_FETCHING_20_LAST_MESSAGES: \r\n            return {\r\n                ...state,\r\n                isFetching20LastMessages: true\r\n            }\r\n\r\n        case STOP_FETCHING_20_LAST_MESSAGES:\r\n            return {\r\n                ...state,\r\n                isFetching20LastMessages: false \r\n            }\r\n\r\n        case START_FETCHING_10_PREVIOUS_MESSAGES: \r\n            return {\r\n                ...state,\r\n                isFetching10PreviousMessages: true\r\n            }\r\n        \r\n        case STOP_FETCHING_10_PREVIOUS_MESSAGES: \r\n            return {\r\n                ...state,\r\n                isFetching10PreviousMessages: false\r\n            }\r\n\r\n        case ADD_ERROR:\r\n            const {error} = action.payload;\r\n            return {\r\n                ...state,\r\n                error   \r\n            } \r\n        \r\n        default:\r\n            return state\r\n    }\r\n}","import {createStore, combineReducers, applyMiddleware, compose} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\nimport { Action } from 'redux'\r\nimport { ThunkAction } from 'redux-thunk'\r\nimport chat from \"./chat/reducer\";\r\nimport { useSelector, TypedUseSelectorHook } from 'react-redux'\r\n\r\nconst rootReducer = combineReducers({chat});\r\n\r\nconst composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  Action<string>\r\n>\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector\r\n\r\nexport default store;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter as Router, Redirect, Switch } from \"react-router-dom\";\r\nimport PrivateRoute from \"./global_components/PrivateRoute\";\r\nimport Login from \"./screens/Login/index.tsx\";\r\nimport Chat from \"./screens/Chat/index.tsx\";\r\nimport Register from \"./screens/Register/index.tsx\";\r\nimport AuthProvider from \"./global_components/AuthProvider\";\r\nimport PublicRoute from \"./global_components/PublicRoute\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./redux/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <AuthProvider>\r\n        <Router>\r\n          <Switch>\r\n            <Redirect exact from=\"/\" to=\"/chat\" />\r\n            <PublicRoute path=\"/login\">\r\n              <Login />\r\n            </PublicRoute>\r\n            <PublicRoute path=\"/register\">\r\n              <Register />\r\n            </PublicRoute>\r\n            <PrivateRoute path=\"/chat\">\r\n              <Chat />\r\n            </PrivateRoute>\r\n          </Switch>\r\n        </Router>\r\n      </AuthProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}